<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Scheduling Service :: Restorecommerce Documentation</title>
    <meta name="generator" content="Antora 3.0.1">
    <link rel="stylesheet" href="../_/css/site.css">
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">Restorecommerce Documentation</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <a class="navbar-icon" href="https://github.com/restorecommerce"><i class="fa fa-github fa-2x"></i></a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="scheduling-srv" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Scheduling Service</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="index.html">Scheduling Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#features">Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#configuration">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#API">API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#api_scheduling_job"><code>Job</code></a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#events">Events</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#emitted-events">Emitted</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#consumed-events">Consumed</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Scheduling Service</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../access-control-srv/index.html">Access Control Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../access-control-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../catalog-srv/index.html">Catalog Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../catalog-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../chassis-srv/index.html">Chassis Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../chassis-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../fulfillment-srv/index.html">Fulfillment Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../fulfillment-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../identity-srv/index.html">Identity Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../identity-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../indexing-srv/index.html">Indexing Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../indexing-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../invoicing-srv/index.html">Invoicing Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../invoicing-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../notification-srv/index.html">Notification Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../notification-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../ostorage-srv/index.html">Object Storage Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../ostorage-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../ordering-srv/index.html">Ordering Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../ordering-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../payment-srv/index.html">Payment Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../payment-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../pdf-rendering-srv/index.html">PDF Rendering Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../pdf-rendering-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../rendering-srv/index.html">Rendering Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../rendering-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../resource-srv/index.html">Resource Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../resource-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Scheduling Service</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../technical-documentation/0.0.1/index.html">Technical Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../technical-documentation/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../technical-documentation/0.0.1/introduction/introduction.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Scheduling Service</a></li>
  </ul>
</nav>
<!--
-->
  <div class="edit-this-page"><a href="https://github.com/restorecommerce/scheduling-srv/edit/master/docs/modules/ROOT/pages/index.adoc"><i class="fa fa-edit"></i></a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Scheduling Service</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://travis-ci.org/restorecommerce/scheduling-srv?branch=master"><span class="image"><img src="http://img.shields.io/travis/restorecommerce/scheduling-srv/master.svg?style=flat-square" alt="Build Status"></span></a>
<a href="https://david-dm.org/restorecommerce/scheduling-srv"><span class="image"><img src="https://img.shields.io/david/restorecommerce/scheduling-srv.svg?style=flat-square" alt="Dependencies"></span></a>
<a href="https://coveralls.io/github/restorecommerce/scheduling-srv?branch=master"><span class="image"><img src="http://img.shields.io/coveralls/restorecommerce/scheduling-srv/master.svg?style=flat-square" alt="Coverage Status"></span></a></p>
</div>
<div class="paragraph">
<p>A microservice for scheduling jobs part of the <a href="https://github.com/restorecommerce">Restorecommerce</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features"><a class="anchor" href="#features"></a>Features</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Scheduling of jobs in a cron like manner.</p>
</li>
<li>
<p>Three kinds of jobs can be scheduled: <code>immediate jobs</code>, <code>one-time future jobs</code> and <code>recurring jobs</code>.</p>
</li>
<li>
<p>Job scheduling is implemented using <a href="https://github.com/OptimalBits/bull">bull</a> backed by <a href="https://redis.io/">Redis</a>.</p>
</li>
<li>
<p>Concurrency and rate limiting for job processing. The job processing is made
by matching the Job type with the Queue name.
In the case when there is no match the jobs are being added to the default Queue.</p>
</li>
<li>
<p>Inbuilt mechanism to clean up completed / failed jobs.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>This service will hook any modules that are placed in the
<a href="https://github.com/restorecommerce/scheduling-srv/tree/master/src/external-jobs">external-jobs</a> directory.
Use this to execute jobs on the scheduling-srv itself, the service looks for default export functions from each of the file in the <code>external-jobs</code> directory.</p>
</li>
<li>
<p>The rescheduling of missed recurring jobs on service start up can be disabled
in the <a href="https://github.com/restorecommerce/scheduling-srv/blob/master/cfg/config.json#L344">configuration</a>.</p>
</li>
<li>
<p>Queues can be configured to use
<a href="https://github.com/restorecommerce/scheduling-srv/blob/master/cfg/config.json#L342">concurrency</a>
and <a href="https://github.com/restorecommerce/scheduling-srv/blob/master/test/cfg/config_test.json#L335">rate limiting</a>
for job processing, where <code>max</code> is the maximum number of jobs processed, per <code>duration</code> in milliseconds.</p>
</li>
<li>
<p>Queues can be configured for <a href="https://github.com/OptimalBits/bull/blob/develop/REFERENCE.md#queue">advancedSettings</a> for configuring <code>lockDuration</code> and other properties in the <a href="https://github.com/restorecommerce/scheduling-srv/blob/master/cfg/config.json#L379">configuration</a>, if the values are missing then <code>bull</code> configures to default values.</p>
</li>
<li>
<p><code>authorization:enable</code>: default value is <code>true</code>, if set to <code>true</code> then access-control check is performed, if value is set to <code>false</code> then access-control check is overridden.</p>
</li>
<li>
<p><code>authorization:enforce</code>: default value is <code>true</code>, if set to <code>true</code> then result of access-control-check is enforced, if value is set to <code>false</code> the result of access-control check if logged and ignored.</p>
</li>
<li>
<p><code>queueCleanup:cleanInterval</code>: clean interval in milliseconds to remove completed / failed jobs from all queues.</p>
</li>
<li>
<p><code>queueCleanup:ttlAfterFinished</code>: time to live after the job is in completed / failed state, default value is 604800000 (7 days) and this default configuration is applicable only if <code>queueCleanup:cleanInterval</code> is set.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="API"><a class="anchor" href="#API"></a>API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This microservice exposes the following gRPC endpoints:</p>
</div>
<div class="sect2">
<h3 id="api_scheduling_job"><a class="anchor" href="#api_scheduling_job"></a><code>Job</code></h3>
<div class="paragraph">
<p><code>io.restorecommerce.job.JobList</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">items</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.Job</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Jobs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">total_count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of Jobs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.Job</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job resource ID, if not specified an uuid is generated.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arbitrary job type (e.g: 'daily_email_dispatcher').</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job data to persist in Redis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">when</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to define the exact time at which a single job instance is processed. Ex: "Jan 15, 2018 10:30:00". This should only be used in one-time jobs.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.JobOptions</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">priority</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.Job.Priority</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job priority.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amount of possible failing runs until a job fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">backoff</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.Backoff</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delay settings between failed job runs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of milliseconds after which the job should be fail with a timeout error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">repeat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.Repeat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job repeat options</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.Repeat</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">every</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval to run a job periodically in milliseconds (cron setting cannot be used together with this setting).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cron</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval to run a job periodically in a cron format (e.g: "0 0 5 * * *"). This should only be used in recurring jobs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to define the exact time at which job should start repeating (only with cron). Ex: "Jan 15, 2018 10:30:00".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">endDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to define the exact time at which job should stop repeating Ex: "Jan 15, 2018 10:30:00".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many times a job has repeated.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.Data</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timezone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timezone specification for job scheduling (ex: 'Europe/Amsterdam').</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">meta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/restorecommerce/protos/blob/master/io/restorecommerce/meta.proto"><code>io.restorecommerce.meta.Meta</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job resource meta info; only contains creation and modification timestamps.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">payload</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ ] <a href="https://github.com/restorecommerce/protos/blob/master/google/protobuf/any.proto"><code>google.protobuf.Any</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generic data type for job-specific data.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.Job.Priority</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 31%;">
<col style="width: 33%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Number</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NORMAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">normal priority, default value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">low priority</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MEDIUM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">medium priority</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HIGH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">high priority</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CRITICAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">critical priority</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.Backoff</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time until retry in milliseconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.Backoff.Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Calculation of the delay for retries.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.Backoff.Type</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 31%;">
<col style="width: 33%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Number</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FIXED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retry with the same delay.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXPONENTIAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exponential delay increase between retries.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="api_scheduling_crud"><a class="anchor" href="#api_scheduling_crud"></a>CRUD Operations</h4>
<div class="paragraph">
<p>The microservice exposes the below CRUD operations for creating or modifying Job resources.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.job.Service</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method Name</th>
<th class="tableblock halign-left valign-top">Request Type</th>
<th class="tableblock halign-left valign-top">Response Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.JobList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.JobList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a list of Job resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.JobReadRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.JobList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read a list of Job resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.JobList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.JobList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update a list of Job resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.resourcebase.DeleteRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/restorecommerce/protos/blob/master/google/protobuf/empty.proto"><code>google.protobuf.Empty</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete a list of Job resources.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="api_job_create"><a class="anchor" href="#api_job_create"></a><code>Create</code></h3>
<div class="paragraph">
<p>Used to create list of Job resources. Requests are performed providing <code>io.restorecommerce.job.JobList</code> protobuf message as
input and responses are <code>io.restorecommerce.job.JobList</code> message. If job id is provided then it is used for job identifier (should be unique), if not then an uuid is generated from this service.
For repeatable Jobs <code>Bull</code> has an internal mechanism to generate job id, it generates the repeatable key based on the job id and cron settings. To map the repeatable key to job identifier
exposed from this service <code>Redis</code> is used with  <a href="https://github.com/restorecommerce/scheduling-srv/blob/master/cfg/config.json#L12">configurable DB index</a> to store the key value pair.</p>
</div>
</div>
<div class="sect2">
<h3 id="api_job_Read"><a class="anchor" href="#api_job_Read"></a><code>Read</code></h3>
<div class="paragraph">
<p>Used to read list of Job resources. Requests are performed providing <code>io.restorecommerce.job.JobReadRequest</code> protobuf message as
input and responses are <code>io.restorecommerce.job.JobList</code> message. This operation supports job filter using job ids or job types.
If no job filter is provided then all jobs in redis with job state completed, failed, active, inactive jobs in redis are returned.
For the detailed protobuf message structure of <code>io.restorecommerce.job.ReadRequest</code> refer <a href="https://github.com/restorecommerce/protos/blob/master/io/restorecommerce/job.proto">job.proto</a>.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.job.JobReadRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.SortOrder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort order</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.JobFilter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">job filter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/restorecommerce/protos/blob/master/io/restorecommerce/resource_base.proto"><code>io.restorecommerce.resourcebase.FieldFilter</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.SortOrder</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNSORTED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENUM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">unsorted order</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASCENDING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENUM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ascending order</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DESCENDING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENUM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">descending order</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.JobFilter</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">job_ids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string []</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list of job identifiers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">job type</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api_job_Update"><a class="anchor" href="#api_job_Update"></a><code>Update</code></h3>
<div class="paragraph">
<p>Used to update list of Job resources. Requests are performed providing <code>io.restorecommerce.job.JobList</code> protobuf message as
input and responses are <code>io.restorecommerce.job.JobList</code> message. Since <code>Bull</code> does not internally provide an update operation,
this operation deletes an existing job and reschedules it with new data. It is possible to update the cron settings and other job
options as well for recurring job based on the job-id. In this case although the repeatable key maintained by Bull is changed the
job id exposed from this service remains the same (since this service maintains a mapping between job id and repeatable key).</p>
</div>
</div>
<div class="sect2">
<h3 id="api_job_Upsert"><a class="anchor" href="#api_job_Upsert"></a><code>Upsert</code></h3>
<div class="paragraph">
<p>Used to upsert list of Job resources. Requests are performed providing <code>io.restorecommerce.job.JobList</code> protobuf message as
input and responses are <code>io.restorecommerce.job.JobList</code> message. If job does not exist then a new job is created.
If job already exists with given job id, then it is deleted, and a new job is created with provided data, but the job identifier remains the same.</p>
</div>
</div>
<div class="sect2">
<h3 id="api_job_Delete"><a class="anchor" href="#api_job_Delete"></a><code>Delete</code></h3>
<div class="paragraph">
<p>Used to delete list of Job resources. Requests are performed providing <code>io.restorecommerce.resourcebase.DeleteRequest</code> protobuf message as
input and responses are a <code>google.protobuf.Empty</code> message. This operation supports passing a list of job identifiers <code>ids</code> to delete,
it also exposes boolean param <code>collection</code> and if set to true all  the jobs in Redis data would be deleted. For the detailed protobuf message structure
of`io.restorecommerce.job.DeleteRequest` refer <a href="https://github.com/restorecommerce/protos/blob/master/io/restorecommerce/job.proto">job.proto</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
there is a folder <code>external-jobs</code> in the repository where any custom job processors can be placed.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events"><a class="anchor" href="#events"></a>Events</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="emitted-events"><a class="anchor" href="#emitted-events"></a>Emitted</h3>
<div class="paragraph">
<p>List of events emitted by this microservice for below topics:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 31%;">
<col style="width: 33%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Topic Name</th>
<th class="tableblock halign-left valign-top">Event Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">io.restorecommerce.jobs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jobsCreated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when a job is created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jobsDeleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when a job is deleted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">io.restorecommerce.command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">restoreResponse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system restore response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">resetResponse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system reset response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">healthCheckResponse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system health check response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versionResponse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system version response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flushCacheResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">flush ACS Cache response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setApiKeyResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set API Key response</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Jobs can be created, updated or deleted by issuing Kafka messages to topic <code>io.restorecommerce.jobs</code>.
These operations are exposed with the same input as the gRPC endpoints
(note that it is only possible to <strong>read</strong> a job through gRPC).</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.job.ScheduledJob</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job instance ID in Redis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arbitrary job type (e.g: 'daily_email_dispatcher').</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.job.Data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arbitrary job type (e.g: 'daily_email_dispatcher').</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">schedule_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job type ex: <code>ONCE</code>, <code>RECURR</code> etc.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.JobDone</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job instance ID in Redis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">schedule_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job type ex: <code>ONCE</code>, <code>RECURR</code> etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete_scheduled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to delete this repeating job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job Type (required if emitting back a message).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">result</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/restorecommerce/protos/blob/master/google/protobuf/any.proto"><code>google.protobuf.Any</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generic data type for job-specific data.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.job.JobFailed</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job instance ID in redis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">schedule_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job type ex: <code>ONCE</code>, <code>RECURR</code> etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Failure details.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Events from the <code>io.restorecommerce.jobs</code> topic are issued whenever a CRUD operation is performed.
They are useful for rescheduling of jobs in case of Redis failure.</p>
</div>
<div class="paragraph">
<p>Jobs emitted by this service to Kafka can be consumed by other microservices by listening to the <code>queuedJob</code> event.
After processing the job an event should be emitted by the respective microservice indicating job failure or completion.
A job is always deleted upon being receiving failure or completion data, unless it is a recurring job.</p>
</div>
</div>
<div class="sect2">
<h3 id="consumed-events"><a class="anchor" href="#consumed-events"></a>Consumed</h3>
<div class="paragraph">
<p>This microservice consumes messages for the following events by topic:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 31%;">
<col style="width: 33%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Topic Name</th>
<th class="tableblock halign-left valign-top">Event Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">io.restorecommerce.jobs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">createJobs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for creating jobs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">modifyJobs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for modifying specific jobs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">deleteJobs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for deleting jobs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jobDone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for when a job has finished</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jobFailed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for when a job has failed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">io.restorecommerce.command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">restoreCommand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for triggering for system restore</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">resetCommand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for triggering system reset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">healthCheckCommand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">to get system health check</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">versionCommand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">to get system version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flushCacheCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">used to flush ACS Cache</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configUpdateCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">used to update configurations</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.</p>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script>
  docsearch({
    appId: '6R8M1A8Y4W',
    apiKey: 'c841b401396e9fbf7feee5d82a638003',
    indexName: 'restorecommerce',
    container: '#search-field',
    debug: true,
  })
</script>
  </body>
</html>
