<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Identity Service :: Restorecommerce Documentation</title>
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../_/css/site.css">
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">Restorecommerce Documentation</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <a class="navbar-icon" href="https://github.com/restorecommerce"><i class="fa fa-github fa-2x"></i></a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="identity-srv" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Identity Service</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="index.html">Identity Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#features">Features</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#features_user_name_validation">User name validation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#configuration">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#API">API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#api_user">User</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_crud">CRUD Operations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_create"><code>Create</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_register"><code>Register</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_activate"><code>Activate</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_change-password"><code>ChangePassword</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_request-password-change"><code>RequestPasswordChange</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_confirm-password-change"><code>ConfirmPasswordChange</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_request-email-change"><code>RequestEmailChange</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_confirm-email-change"><code>ConfirmEmailChange</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_confirm-user-invitation"><code>ConfirmUserInvitation</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_login"><code>Login</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_unregister"><code>Unregister</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_find"><code>Find</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_user_find-by-role"><code>FindByRole</code></a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#api_role">Role</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#api_role_crud">CRUD Operations</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#events">Events</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#emitted-events">Emitted</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#consumed-events">Consumed</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Identity Service</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../access-control-srv/index.html">Access Control Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../access-control-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../catalog-srv/index.html">Catalog Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../catalog-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../chassis-srv/index.html">Chassis Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../chassis-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../fulfillment-srv/index.html">Fulfillment Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../fulfillment-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Identity Service</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../indexing-srv/index.html">Indexing Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../indexing-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../invoicing-srv/index.html">Invoicing Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../invoicing-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../notification-srv/index.html">Notification Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../notification-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../ostorage-srv/index.html">Object Storage Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../ostorage-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../ordering-srv/index.html">Ordering Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../ordering-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../payment-srv/index.html">Payment Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../payment-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../pdf-rendering-srv/index.html">PDF Rendering Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../pdf-rendering-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../rendering-srv/index.html">Rendering Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../rendering-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../resource-srv/index.html">Resource Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../resource-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../scheduling-srv/index.html">Scheduling Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../scheduling-srv/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../technical-documentation/0.0.1/index.html">Technical Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../technical-documentation/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../technical-documentation/0.0.1/introduction/introduction.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Identity Service</a></li>
  </ul>
</nav>
<!--
-->
  <div class="edit-this-page"><a href="https://github.com/restorecommerce/identity-srv/edit/master/docs/modules/ROOT/pages/index.adoc"><i class="fa fa-edit"></i></a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Identity Service</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://travis-ci.org/restorecommerce/identity-srv?branch=master"><span class="image"><img src="http://img.shields.io/travis/restorecommerce/identity-srv/master.svg?style=flat-square" alt="Build Status"></span></a>
<a href="https://david-dm.org/restorecommerce/identity-srv"><span class="image"><img src="https://img.shields.io/david/restorecommerce/identity-srv.svg?style=flat-square" alt="Dependencies"></span></a>
<a href="https://coveralls.io/github/restorecommerce/identity-srv?branch=master"><span class="image"><img src="http://img.shields.io/coveralls/restorecommerce/identity-srv/master.svg?style=flat-square" alt="Coverage Status"></span></a></p>
</div>
<div class="paragraph">
<p>A microservice for identity management.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features"><a class="anchor" href="#features"></a>Features</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Management of <em>User Account</em> and <em>Role</em> entities</p>
</li>
<li>
<p>User-to-Role associations with arbitrary scoping</p>
</li>
<li>
<p>User account creation using any of the following options: self-service, by privileged user, by invitation</p>
</li>
<li>
<p>Password change as self-service</p>
</li>
<li>
<p>Password recovery as self-service</p>
</li>
<li>
<p>Un-registration as self-service</p>
</li>
<li>
<p>Customizable, optional email notifications to drive processes</p>
</li>
<li>
<p>Token management service</p>
</li>
<li>
<p>Authentication log audit log</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following service specific configuration properties are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>uniqueEmailConstraint</code> [<code>true</code>]: <code>name</code> and <code>email</code> fields for registering/ creating user are unique, if set to <code>false</code> it allows to register/ create users with same email identifier, however <code>name</code> must always be unique.</p>
</li>
<li>
<p><code>loginIdentifierProperty</code> [<code>name</code>, <code>email</code>]: list of identifiers to enable user to login, if the config is missing then by default user can login with either name or email.</p>
</li>
<li>
<p><code>userActivationRequired</code> [<code>true</code>]: if set to <code>false</code>, users do not require account activation to be able to log in and use their account.</p>
</li>
<li>
<p><code>register</code> [<code>true</code>]: if set to <code>false</code>, the <code>Register</code> endpoint is disabled and users cannot self sign up but only be created through the bulk creation method <code>Create</code> which is usually only available to adminstrative user roles.</p>
</li>
<li>
<p><code>enableEmail</code> [<code>true</code>]: if set to <code>true</code>, emails are sent out upon specific events, like account creation and email change.</p>
</li>
<li>
<p><code>activationURL</code>: URL used for link in activation email to activate the account.</p>
</li>
<li>
<p><code>inactivatedAccountExpiry</code> in seconds [<code>undefined</code>]: if set to a number of seconds, the account will completely be removed from the system (log date will be retained) if no activation has been performed since the given number of seconds.</p>
</li>
<li>
<p><code>emailConfirmationURL</code>: URL used for link in confirmation email to confirm email address change.</p>
</li>
<li>
<p><code>invitationURL</code>: URL used for link in invitation email to accept invitation.</p>
</li>
<li>
<p><code>data</code>: additional fields can be provided inside data. These fields can then be used inside the hbs templates.</p>
</li>
<li>
<p><code>hbsTemplates</code>: contains URLs for externally served <a href="https://handlebarsjs.com/">Handlebars templates</a>. These templates are used in emails sent by system for different operations like <code>Register</code>, <code>RequestEmailChange</code> and <code>RequestPasswordChange</code>.</p>
</li>
<li>
<p><code>minUsernameLength</code>: minimum length for the user’s <code>name</code>.</p>
</li>
<li>
<p><code>maxUsernameLength</code>: maximum length for the user’s <code>name</code>.</p>
</li>
<li>
<p><code>obfuscateAuthNErrorReason</code>:`false`, if set to <code>true</code> the login error details are obfuscated and generalized error message is shown.</p>
</li>
<li>
<p><code>authorization:enable</code> [<code>true</code>]: if set to <code>true</code> then access-control check is performed, if set to <code>false</code> then access-control check is overridden.</p>
</li>
<li>
<p><code>authorization:enforce</code> [<code>true</code>]: if set to <code>true</code> then result of access-control-check is enforced, if value is set to <code>false</code> the result of access-control check is logged and ignored.</p>
</li>
<li>
<p><code>defaultRegisterUserRoles</code>: default role associations granted to newly registered users.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example: We can add a field called <code>url</code> nested inside the <code>data</code> field in
the <code>config.json</code> file, and then use this field in <code>registration_body.hbs</code> to
generate some html with the interpolated url.
Multiple fields are supported as-well.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>config.json:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "service": {
    "data": {
      "url": "https://www.google.com/"
    }
  }
}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>registration_body.hbs:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;a href="{{data.url}}"&gt;Google Main Page&lt;/a&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="API"><a class="anchor" href="#API"></a>API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This microservice exposes the following gRPC endpoints:</p>
</div>
<div class="sect2">
<h3 id="api_user"><a class="anchor" href="#api_user"></a>User</h3>
<div class="paragraph">
<p>A list of User resources.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.UserList</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">items</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.User</code>[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Users</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">total_count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of Users</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A User resource.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.User</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User ID, unique, key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">meta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/restorecommerce/protos/blob/master/io/restorecommerce/meta.proto"><code>io.restorecommerce.meta.Meta</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meta info</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">first_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User’s first name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">last_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User’s last name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">email</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">new_email</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property in which the email is stored upon an email change request until its confirmation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">active</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is <code>true</code> if the user was successfully activated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activation_code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activation code used in the activation process (cleared after successful activation)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raw password, not stored</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password_hash</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hashed password, stored</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timezone_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The User’s timezone setting (defaults to `Europe/Berlin')</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">locale_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The User’s locale ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">default_scope</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default scope of user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unauthenticated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set automatically to <code>true</code> upon user registry until its account is activated for the first time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">guest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If user is guest</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">role_associations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/restorecommerce/protos/blob/master/io/restorecommerce/auth.proto#L39"><code>io.restorecommerce.auth.RoleAssociation</code></a> []</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role associations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.UserType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Type - individual, organization or guest user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">image</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.image.Image</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">used for user invitation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invited_by_user_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inviting User’s name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invited_by_user_first_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inviting User’s first name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invited_by_user_last_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">inviting User’s last name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tokens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/restorecommerce/protos/blob/master/io/restorecommerce/auth.proto#L26"><code>io.restorecommerce.auth.Tokens</code></a> []</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list of Tokens</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">last_access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google.protobuf.Timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp of user&#8217;s last access</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.auth.RoleAssociation</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/restorecommerce/protos/blob/master/io/restorecommerce/attribute.proto#L5"><code>io.restorecommerce.attribute.Attribute</code></a> []</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes associated with the User’s role</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">role association identifier (referred in Tokens list)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.attribute.Attribute</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute value</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.user.UserType</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ORG_USER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">organizational User</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INDIVIDUAL_USER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">private User</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GUEST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">guest User</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TECHNICAL_USER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">technical User</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.image.Image</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">image identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">caption</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">image caption</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filename</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">image file name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">content_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">image content type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">image URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">width</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">image width</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">height</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">image height</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">image length</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.auth.Subject</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user id of the authenticated user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scope</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">target scope of user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">role_associations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.RoleAssociation</code>[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of roles with their associated attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hierarchical_scopes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.HierarchicalScope</code>[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of hierarchical scopes of the authenticated user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unauthenticated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for unauthenticated users</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">token</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">token value</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.user.HierarchicalScope</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">role scoping instance / root node value of Organization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.role.Role.id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">role identifier associated with role scoping instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">children</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.HierarchicalScope</code>[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hierarchical organizational tree</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="api_user_crud"><a class="anchor" href="#api_user_crud"></a>CRUD Operations</h4>
<div class="paragraph">
<p>The microservice exposes the below CRUD operations for creating or modifying User resources.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.UserService</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23%;">
<col style="width: 25%;">
<col style="width: 27%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method Name</th>
<th class="tableblock halign-left valign-top">Request Type</th>
<th class="tableblock halign-left valign-top">Response Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.UserList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.UserList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a list of User resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.resourcebase.ReadRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.UserList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read a list of User resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.UserList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.UserList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update a list of User resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.resourcebase.DeleteRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete a list of User resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upsert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.UserList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.UserList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create or Update a list of User resources</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_create"><a class="anchor" href="#api_user_create"></a><code>Create</code></h4>
<div class="paragraph">
<p>Used to create a User (usually by privileged user). Requests are performed providing <code>io.restorecommerce.user.UserList</code>
protobuf message as input and responses are an <code>io.restorecommerce.user.UserList</code> message. The User-to-Role associations
assignment is optionally secured by <a href="https://github.com/restorecommerce/access-control-srv">access-control-srv</a> with
<a href="https://github.com/restorecommerce/identity-srv/blob/master/cfg/config.json#L71">configuration</a>.
If authorization is enabled this service uses <a href="https://github.com/restorecommerce/acs-client/">acs-client</a>
to invoke <code>access-control-srv</code> to verify the role and its associations are valid. When authorization is enabled the creating
user should have a valid authentication subject <code>io.restorecommerce.auth.Subject</code> in request else the request is denied.
The User is allowed to create other Users with valid User-to-Role associations <code>io.restorecommerce.user.RoleAssociation.Attribute</code>
with in his <code>io.restorecommerce.user.HierarchicalScope</code>. The creating User can assign roles if <code>io.restorecommerce.role.Role.assignable_by_roles</code>
is with in his hierarchical scope context <code>io.restorecommerce.user.HierarchicalScope.role</code>.</p>
</div>
<div class="paragraph">
<p>This API also checks if user name is complying with the following set of rules:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the user name contains an "@" symbol, then the username must also be a valid email.</p>
</li>
<li>
<p>The user name must respect the minimum and maximum number of characters allowed.</p>
</li>
<li>
<p>The user name must begin with a letter (a-z, A-Z, äöüÄÖÜß).</p>
</li>
<li>
<p>The user name must contain only characters from the allowed characters list (a-z, A-Z, 0-9, äöüÄÖÜß, @_.-).</p>
</li>
<li>
<p>The user name should not contain forbidden character repetitions (__, .., --).</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="api_user_register"><a class="anchor" href="#api_user_register"></a><code>Register</code></h4>
<div class="paragraph">
<p>Used to register a User. Requests are performed providing <code>io.restorecommerce.user.RegisterRequest</code> protobuf message as
input and responses are an <code>io.restorecommerce.user.User</code> message. The <code>io.restorecommerce.user.RoleAssociation</code> are associated using the preconfigured
role association from the <a href="https://github.com/restorecommerce/identity-srv/blob/master/cfg/config.json#L728">defaultRegisterUserRoles</a>. If a valid configuration for retrieving email-related
<a href="http://handlebarsjs.com/">handlebars</a> templates from a remote server is provided, an email request is performed upon a
successful registration. Such configuration should correspond to the <code>service/hbsTemplates</code> element in the config files.
The email contains the user’s activation code. Email requests are done by emitting a`sendEmail` notification event,
which is consumed by <a href="http://github.com/restorecommerce/notification-srv">notification-srv</a> to send an email.
Please note that this email operation also implies template rendering, which is performed by emitting a <code>renderRequest</code> event,
which is consumed by the <a href="http://github.com/restorecommerce/rendering-srv">rendering-srv</a>. Therefore, the email sending
step requires both a running instance of the rendering-srv and the notification-srv (or similar services which implement
the given interfaces) as well as a remote server containing a set of email templates. This is decoupled from the service’s
core functionalities, and it is automatically disabled if no template configuration is provided.</p>
</div>
<div class="paragraph">
<p>Moreover, the <code>Register</code> operation itself is optional and one can enable or disable it through the <code>service.register</code>
configuration value. If disabled, the only endpoint for user creation is <code>Create</code>.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.RegisterRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">guest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Guest user, default value is <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">first_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User’s first name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">last_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User’s last name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">email</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User email ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timezone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The User’s timezone setting (defaults to `Europe/Berlin')</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">locale_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The User’s locale setting identifier (defaults to `de-DE')</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.UserType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">captcha_code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">captcha code</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_activate"><a class="anchor" href="#api_user_activate"></a><code>Activate</code></h4>
<div class="paragraph">
<p>Used to activate a User. The <code>service.userActivationRequired</code> config value turns the user activation process on or off.
Requests are performed providing <code>io.restorecommerce.user.ActiveRequest</code> protobuf message as input and responses are a <code>google.protobuf.Empty</code> message.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.ActiveRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name or User email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activation_code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">activation code for User</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_change-password"><a class="anchor" href="#api_user_change-password"></a><code>ChangePassword</code></h4>
<div class="paragraph">
<p>Used to change password for the User (this User should be activated to perform this operation).
Requests are performed providing <code>io.restorecommerce.user.ChangePasswordRequest</code> protobuf message as input and responses are an <code>io.restorecommerce.user.User</code> message.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.ChangePasswordRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">old password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">new_password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">new password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_request-password-change"><a class="anchor" href="#api_user_request-password-change"></a><code>RequestPasswordChange</code></h4>
<div class="paragraph">
<p>Used to change password for the User in case they forget it. It generates and persists an activation code for the user
and issues an email with a confirmation URL. Requests are performed providing <code>io.restorecommerce.user.RequestPasswordChangeRequest</code>
protobuf message as input and responses are <code>google.protobuf.Empty</code> messages. Either user name or email should be
specified upon the request.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.RequestPasswordChangeRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name or User email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_confirm-password-change"><a class="anchor" href="#api_user_confirm-password-change"></a><code>ConfirmPasswordChange</code></h4>
<div class="paragraph">
<p>Used to confirm the user’s password change request. The input is an <code>io.restorecommerce.user.ConfirmPasswordChangeRequest</code>
message and the response is a <code>google.protobuf.Empty</code> message. If the received activation code matches the previously
generated activation code, the stored password hash value is replaced by a hash derived from the new password, and the
activation code is reset.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.ConfirmPasswordChangeRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name or User email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activation_code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activation code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_request-email-change"><a class="anchor" href="#api_user_request-email-change"></a><code>RequestEmailChange</code></h4>
<div class="paragraph">
<p>Used to change the user’s email. Requests are performed providing the <code>io.restorecommerce.user.ChangeEmailRequest</code>
protobuf message as input and responses is a <code>google.protobuf.Empty</code> message. when receiving this request, the service
assigns the new email value to the user’s <code>new_email</code> property and triggers an email with a confirmation URL containing
a newly-generated activation code.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.ChangeEmailRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name or User email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">new_email</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_confirm-email-change"><a class="anchor" href="#api_user_confirm-email-change"></a><code>ConfirmEmailChange</code></h4>
<div class="paragraph">
<p>Used to confirm the user’s email change request. The input is an <code>io.restorecommerce.user.ConfirmEmailChangeRequest</code>
message and the response is a <code>google.protobuf.Empty</code> message. If the received activation code matches the previously
generated activation code, the value assigned to the <code>new_email</code> property is then assigned to the <code>email</code> property and
<code>new_email</code> is set to null.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.ConfirmEmailChangeRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name or User email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activation_code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Activation code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_confirm-user-invitation"><a class="anchor" href="#api_user_confirm-user-invitation"></a><code>ConfirmUserInvitation</code></h4>
<div class="paragraph">
<p>Used to confirm user invitation. Requests are performed providing <code>io.restorecommerce.user.ConfirmUserInvitationRequest</code>
protobuf message as input and responses are a <code>google.protobuf.Empty</code> message. For <code>Create</code> operation if the invite
flag <code>io.restorecommerce.user.invite</code> is set to true then an invitation mail would be sent if <code>invitationURL</code> and <code>hbsTemplates</code>
configuration values are setup accordingly.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.ConfirmUserInvitationRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name or User email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activation_code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User’s activation_code sent via email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_login"><a class="anchor" href="#api_user_login"></a><code>Login</code></h4>
<div class="paragraph">
<p>Used to verify the User name or email with a password and return User’s information in case the operation is successful.
Requests are performed providing <code>io.restorecommerce.user.LoginRequest</code> protobuf message as input, and the response is
<code>io.restorecommerce.user.User</code> message.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.LoginRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name or User email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raw password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">token</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token for users</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_unregister"><a class="anchor" href="#api_user_unregister"></a><code>Unregister</code></h4>
<div class="paragraph">
<p>Used to unregister a User. Requests are performed providing <code>io.restorecommerce.user.UnregisterRequest</code> protobuf message
as input and responses are a <code>google.protobuf.Empty</code> message.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.UnregisterRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name or User email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_find"><a class="anchor" href="#api_user_find"></a><code>Find</code></h4>
<div class="paragraph">
<p>A simplified version of <code>read</code>, which only filters users by a username, email and/or ID. Requests are performed providing
<code>io.restorecommerce.user.FindRequest</code> protobuf message as input and responses contain a list <code>io.restorecommerce.user.User</code> messages.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.FindRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User ID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">email</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User EmailID</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_find-by-role"><a class="anchor" href="#api_user_find-by-role"></a><code>FindByRole</code></h4>
<div class="paragraph">
<p>A custom endpoint in order to filter a user by its role and any attributes associated with it. Requests are performed
providing <code>io.restorecommerce.user.FindByRoleRequest</code> protobuf message as input and responses contain a list
<code>io.restorecommerce.user.User</code> messages.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.FindByRoleRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.RoleAssociation.Attribute</code>[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_find-by-token"><a class="anchor" href="#api_user_find-by-token"></a><code>FindByToken</code></h4>
<div class="paragraph">
<p>This endpoint returns the user data based on the provided token value. Requests are performed providing <code>io.restorecommerce.user.FindByTokenRequest</code> protobuf message
as input and response is <code>io.restorecommerce.user.User</code> data. For caching purpose this endpoint also stores the token information in Redis with key as token identifier and user data as value.
The cached data is invalidated when User is logged_out or when token <code>Destroy</code> or <code>RevokeByGrantId</code> api is invoked.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.FindByTokenRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">token</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token value</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_user_sendActivationEmail"><a class="anchor" href="#api_user_sendActivationEmail"></a><code>SendActivationEmail</code></h4>
<div class="paragraph">
<p>This endpoint sends activation email to the email id of the registered user. In case if the User is already activated suitable error response is sent, else activation email
containing activation code is sent back. Requests are performed providing <code>io.restorecommerce.user.SendActivationEmailRequest</code> protobuf message
as input and response is <code>google.protobuf.Empty</code> message.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.user.SendActivationEmailRequest</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User name or email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="api_role"><a class="anchor" href="#api_role"></a><code>Role</code></h3>
<div class="paragraph">
<p>A list of Role resources.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.role.RoleList</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">items</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.role.RoleList</code>[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Roles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">total_count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of Roles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject details</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>io.restorecommerce.role.Role</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">specifies the Role of the User</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">assignable_by_roles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">role identifier’s who can assign this role</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">meta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/restorecommerce/protos/blob/master/io/restorecommerce/meta.proto"><code>io.restorecommerce.meta.Meta</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meta info</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="api_role_crud"><a class="anchor" href="#api_role_crud"></a>CRUD Operations</h4>
<div class="paragraph">
<p>The microservice exposes the below CRUD operations for creating or modifying Role resources.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.role.RoleService</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23%;">
<col style="width: 25%;">
<col style="width: 27%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method Name</th>
<th class="tableblock halign-left valign-top">Request Type</th>
<th class="tableblock halign-left valign-top">Response Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.RoleList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.RoleList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a list of Role resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.resourcebase.ReadRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.RoleList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read a list of Role resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.RoleList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.RoleList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update a list of Role resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.resourcebase.DeleteRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete a list of Role resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upsert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.RoleList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.user.RoleList</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create or Update a list of Role resources</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For the detailed protobuf message structure of <code>io.restorecommerce.resourcebase.ReadRequest</code> and
<code>io.restorecommerce.resourcebase.DeleteRequest</code> refer <a href="https://github.com/restorecommerce/resource-base-interface">resource-base-interface</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api_token"><a class="anchor" href="#api_token"></a>Token</h3>
<div class="paragraph">
<p>A Token resource.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.auth.Tokens</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">expires_in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google.protobuf.Timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token expiration timestamp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">token</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">token value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scopes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string []</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">identifier for RoleAssociation <code>io.restorecommerce.auth.RoleAssociation.id</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">token type ex: access_token, refresh_token etc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">last_login</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google.protobuf.Timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp of user last logged in</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">interactive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">flag to indicate a login from GUI</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="api_token_crud"><a class="anchor" href="#api_token_crud"></a>CRUD Operations</h4>
<div class="paragraph">
<p>The microservice exposes the below operations for upsert, find and delete Token resources.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.token.TokenService</code></p>
</div>
</div>
<div class="sect3">
<h4 id="api_upsert_token"><a class="anchor" href="#api_upsert_token"></a><code>Upsert</code></h4>
<div class="paragraph">
<p>This endpoint upserts token data on user entity <code>io.restorecommerce.user.User.tokens</code>. Request is formed using <code>io.restorecommerce.token.TokenData</code> and response is
<code>google.protobuf.Any</code> message containing the status of upsert operation. For upsert operation we use a tech user <code>upsert_user_tokens</code> configured
in <a href="https://github.com/restorecommerce/identity-srv/blob/master/cfg/config.json#L724">configuration</a>.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.token.TokenData</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">payload</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token payload (id_token)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">expires_in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google.protobuf.Timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token expiration timestamp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">required</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_find_token"><a class="anchor" href="#api_find_token"></a><code>Find</code></h4>
<div class="paragraph">
<p>This endpoint is used to find the token information using token identifier. Requests are performed providing <code>io.restorecommerce.token.Identifier</code>
protobuf message as input and response is <code>google.protobuf.Any</code> message containing token information.</p>
</div>
<div class="paragraph">
<p><code>io.restorecommerce.token.Identifier</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 16%;">
<col style="width: 20%;">
<col style="width: 44%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Label</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.auth.Subject</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject details</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api_destroy_token"><a class="anchor" href="#api_destroy_token"></a><code>Destroy</code></h4>
<div class="paragraph">
<p>This endpoint is used to destroy or remove the token information from user entity <code>io.restorecommerce.user.User.tokens</code>.
Requests are performed providing <code>io.restorecommerce.token.Identifier</code>
protobuf message as input and response is <code>google.protobuf.Any</code> message containing token information.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 23%;">
<col style="width: 25%;">
<col style="width: 27%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method Name</th>
<th class="tableblock halign-left valign-top">Request Type</th>
<th class="tableblock halign-left valign-top">Response Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upsert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.token.TokenData</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google.protobuf.Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">upserts token and returns success or failure message</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Find</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.token.Identifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google.protobuf.Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">find token data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Destroy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.token.Identifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google.protobuf.Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">destroy token</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RevokeByGrantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.token.GrantId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google.protobuf.Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">destroy token by its grantId property reference</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consume</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.token.Identifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>google.protobuf.Any</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mark a stored token as consumed (updates last_access)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events"><a class="anchor" href="#events"></a>Events</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="emitted-events"><a class="anchor" href="#emitted-events"></a>Emitted</h3>
<div class="paragraph">
<p>List of events emitted by this microservice for below topics:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 31%;">
<col style="width: 33%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Topic Name</th>
<th class="tableblock halign-left valign-top">Event Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.users.resource</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>registered</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted upon user registration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>activated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted upon user activation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>passwordChangeRequested</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when user requests for password change</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>passwordChanged</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when password was changed successfully</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>emailChangeRequested</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when user requests for email change</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>emailChangeConfirmed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when user’s email was changed successfully</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unregistered</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when a user is unregistered</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userCreated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when a user is created</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userModified</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when a user is modified</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userDeleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when a user is deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.roles.resource</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roleCreated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted upon role creation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roleModified</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted upon role modification</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roleDeleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when role deletion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.notification</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sendEmail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when triggering notification email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.rendering</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderRequest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">emitted when rendering is requested</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.command</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restoreResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system restore response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resetResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system reset response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>healthCheckResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system health check response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>versionResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system version response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flushCacheResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">flush ACS Cache response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setApiKeyResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set API Key response</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For <code>renderRequest</code> and <code>renderResponse</code> the message structures are defined in <a href="https://github.com/restorecommerce/rendering-srv">rendering-srv</a>
and for <code>sendEmail</code> they are defined in <a href="https://github.com/restorecommerce/notification-srv">notification-srv</a>,</p>
</div>
</div>
<div class="sect2">
<h3 id="consumed-events"><a class="anchor" href="#consumed-events"></a>Consumed</h3>
<div class="paragraph">
<p>This microservice consumes messages for the following events by topic:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 31%;">
<col style="width: 33%;">
<col style="width: 36%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Topic Name</th>
<th class="tableblock halign-left valign-top">Event Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.command</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restoreCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for triggering for system restore</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resetCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for triggering system reset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>healthCheckCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">to get system health check</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>versionCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">to get system version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>flushCacheCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">used to flush ACS Cache</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configUpdateCommand</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">used to update configurations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.restorecommerce.rendering</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>renderResponse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">to get response from render request</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.</p>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script>
  docsearch({
    appId: '6R8M1A8Y4W',
    apiKey: 'c841b401396e9fbf7feee5d82a638003',
    indexName: 'restorecommerce',
    container: '#search-field',
    debug: true,
  })
</script>
  </body>
</html>
